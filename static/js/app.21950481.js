(function(){"use strict";var e={4902:function(e,s,n){var t=n(9242),a=n(3396);function r(e,s,n,t,r,o){const l=(0,a.up)("NavBar"),c=(0,a.up)("router-view");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(l),((0,a.wg)(),(0,a.j4)(c,{key:e.$route.fullPath}))],64)}n(8052);var o=n(7139);const l={class:"navbar navbar-expand-sm bg-light navbar-light"},c={class:"container-fluid"},u={class:"navbar-nav"},i={class:"nav-item"},d=(0,a.Uk)("首页"),p={class:"nav-item"},m=(0,a.Uk)("好友列表"),f={class:"nav-item"},w=(0,a.Uk)("用户动态"),v={key:0,class:"navbar-nav"},_={class:"nav-item"},g=(0,a.Uk)("登录"),b={class:"nav-item"},h=(0,a.Uk)("注册"),y={key:1,class:"navbar-nav"},k={class:"nav-item"},j={class:"nav-item"};function x(e,s,n,t,r,x){const S=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("nav",l,[(0,a._)("div",c,[(0,a._)("ul",u,[(0,a._)("li",i,[(0,a.Wm)(S,{class:"nav-link active",to:{name:"home"}},{default:(0,a.w5)((()=>[d])),_:1})]),(0,a._)("li",p,[(0,a.Wm)(S,{class:"nav-link",to:{name:"friends"}},{default:(0,a.w5)((()=>[m])),_:1})]),(0,a._)("li",f,[(0,a.Wm)(S,{class:"nav-link",to:{name:"user",params:{userid:e.$store.state.user.id}}},{default:(0,a.w5)((()=>[w])),_:1},8,["to"])])]),e.$store.state.user.is_login?((0,a.wg)(),(0,a.iD)("ul",y,[(0,a._)("li",k,[(0,a.Wm)(S,{class:"nav-link",to:{name:"user",params:{userid:e.$store.state.user.id}}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,o.zw)(e.$store.state.user.username),1)])),_:1},8,["to"])]),(0,a._)("li",j,[(0,a._)("a",{class:"nav-link",onClick:s[0]||(s[0]=(...e)=>t.back&&t.back(...e))},"退出")])])):((0,a.wg)(),(0,a.iD)("ul",v,[(0,a._)("li",_,[(0,a.Wm)(S,{class:"nav-link",to:{name:"login"}},{default:(0,a.w5)((()=>[g])),_:1})]),(0,a._)("li",b,[(0,a.Wm)(S,{class:"nav-link",to:{name:"have"}},{default:(0,a.w5)((()=>[h])),_:1})])]))])])}var S=n(65),O={name:"NavBar",setup(){const e=(0,S.oR)(),s=()=>{e.commit("back"),location.reload()};return{back:s}}},U=n(89);const C=(0,U.Z)(O,[["render",x],["__scopeId","data-v-b328a674"]]);var D=C,P={name:"APP",components:{NavBar:D}};const z=(0,U.Z)(P,[["render",r]]);var H=z,T=n(2483);const Z=(0,a.Uk)(" 首页 ");function E(e,s,n,t,r,o){const l=(0,a.up)("cardcontent");return(0,a.wg)(),(0,a.j4)(l,null,{default:(0,a.w5)((()=>[Z])),_:1})}const I={class:"home"},V={class:"container"},q={class:"card"},W={class:"card-body mt-2"};function B(e,s,n,t,r,o){return(0,a.wg)(),(0,a.iD)("div",I,[(0,a._)("div",V,[(0,a._)("div",q,[(0,a._)("div",W,[(0,a.WI)(e.$slots,"default")])])])])}var A={name:"CardContent"};const F=(0,U.Z)(A,[["render",B]]);var R=F,M={name:"HomeView",components:{cardcontent:R}};const $=(0,U.Z)(M,[["render",E]]);var L=$;const N=["onClick"],Y={class:"card-body"},G={class:"row text-start"},K={class:"col-1"},J=["src"],Q={class:"col-11"},X={class:"follow"};function ee(e,s,n,t,r,l){const c=(0,a.up)("cardcontent");return(0,a.wg)(),(0,a.j4)(c,null,{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.users.arr,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"card mt-2",key:e.id,onClick:s=>t.eventone(e.id)},[(0,a._)("div",Y,[(0,a._)("div",G,[(0,a._)("div",K,[(0,a._)("img",{class:"img-fluid",src:e.photo,alt:""},null,8,J)]),(0,a._)("div",Q,[(0,a._)("h3",null,(0,o.zw)(e.username),1),(0,a._)("div",X,(0,o.zw)(e.followerCount),1)])])])],8,N)))),128))])),_:1})}var se=n(7387),ne=n.n(se),te=n(4870),ae={name:"FriendsView",components:{cardcontent:R},setup(){const e=(0,S.oR)();let s=(0,te.qj)({arr:[]});ne().ajax({type:"get",url:"https://app165.acapp.acwing.com.cn/myspace/userlist/",success:function(e){s.arr=e}});const n=s=>{console.log("执行"),e.state.user.is_login?vs.push({name:"user",params:{userid:s}}):vs.push({name:"login"})};return{users:s,eventone:n}}};const re=(0,U.Z)(ae,[["render",ee],["__scopeId","data-v-09b36219"]]);var oe=re;const le=e=>((0,a.dD)("data-v-ba0796cc"),e=e(),(0,a.Cn)(),e),ce={class:"row justify-content-center text-start"},ue={class:"col-3"},ie={class:"mb-3 mt-3"},de=le((()=>(0,a._)("label",{for:"username",class:"form-label"},"username:",-1))),pe={class:"mb-3"},me=le((()=>(0,a._)("label",{for:"password",class:"form-label"},"Password:",-1))),fe={class:"mb-3"},we=le((()=>(0,a._)("label",{for:"repassword",class:"form-label"},"again Password:",-1))),ve={class:"form-label red"},_e=le((()=>(0,a._)("button",{type:"submit",class:"btn btn-primary w-100"},"Submit",-1)));function ge(e,s,n,r,l,c){const u=(0,a.up)("cardcontent");return(0,a.wg)(),(0,a.j4)(u,null,{default:(0,a.w5)((()=>[(0,a._)("div",ce,[(0,a._)("div",ue,[(0,a._)("form",{onSubmit:s[3]||(s[3]=(0,t.iM)(((...e)=>r.out&&r.out(...e)),["prevent"]))},[(0,a._)("div",ie,[de,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>r.username=e),type:"text",class:"form-control",id:"username",placeholder:"Enter username",name:"username"},null,512),[[t.nr,r.username]])]),(0,a._)("div",pe,[me,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>r.password=e),type:"password",class:"form-control",id:"password",placeholder:"Enter password",name:"password"},null,512),[[t.nr,r.password]])]),(0,a._)("div",fe,[we,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>r.repassword=e),type:"password",class:"form-control",id:"repassword",placeholder:"again password",name:"repassword"},null,512),[[t.nr,r.repassword]])]),(0,a._)("label",ve,(0,o.zw)(r.warn),1),_e],32)])])])),_:1})}var be={name:"HaveView",components:{cardcontent:R},setup(){let e=(0,te.iH)(""),s=(0,te.iH)(""),n=(0,te.iH)(" "),t=(0,te.iH)(""),a=(0,S.oR)();const r=()=>{ne().ajax({type:"POST",url:"https://app165.acapp.acwing.com.cn/myspace/user/",data:{username:s.value,password:e.value,password_confirm:t.value},success(t){"success"==t.result?a.dispatch("login",{password:e.value,username:s.value,success(){localStorage.setItem("username",e.value),localStorage.setItem("password",e.value),vs.push({name:"friends"})},error(){vs.push({name:"error"})}}):"用户名和密码不能为空"==t.result?n.value="用户名和密码不能为空":"两个密码不一致"==t.result?n.value="两个密码不一致":"用户名已存在"==t.result&&(n.value="用户名已存在")},error(){console.log("error")}})};return{password:e,username:s,warn:n,out:r,repassword:t}}};const he=(0,U.Z)(be,[["render",ge],["__scopeId","data-v-ba0796cc"]]);var ye=he;const ke={class:"row justify-content-center text-start"},je={class:"col-3"},xe={class:"mb-3 mt-3"},Se=(0,a._)("label",{for:"username",class:"form-label"},"username:",-1),Oe={class:"mb-3"},Ue=(0,a._)("label",{for:"password",class:"form-label"},"Password:",-1),Ce=(0,a._)("button",{type:"submit",class:"btn btn-primary w-100"},"Submit",-1);function De(e,s,n,r,o,l){const c=(0,a.up)("cardcontent");return(0,a.wg)(),(0,a.j4)(c,null,{default:(0,a.w5)((()=>[(0,a._)("div",ke,[(0,a._)("div",je,[(0,a._)("form",{onSubmit:s[2]||(s[2]=(0,t.iM)(((...e)=>r.out&&r.out(...e)),["prevent"]))},[(0,a._)("div",xe,[Se,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>r.username=e),type:"text",class:"form-control",id:"username",placeholder:"Enter username",name:"username"},null,512),[[t.nr,r.username]])]),(0,a._)("div",Oe,[Ue,(0,a.wy)((0,a._)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>r.password=e),type:"password",class:"form-control",id:"password",placeholder:"Enter password",name:"password"},null,512),[[t.nr,r.password]])]),Ce],32)])])])),_:1})}var Pe={name:"LoginView",components:{cardcontent:R},setup(){const e=(0,S.oR)();let s=(0,te.iH)(""),n=(0,te.iH)("");const t=()=>{e.dispatch("login",{password:s.value,username:n.value,success(){localStorage.setItem("username",s.value),localStorage.setItem("password",s.value),vs.push({name:"friends"})},error(){console.log("error")}})};return{password:s,username:n,out:t}}};const ze=(0,U.Z)(Pe,[["render",De]]);var He=ze;const Te={class:"row"},Ze={class:"col-3"},Ee={class:"col-9"};function Ie(e,s,n,t,r,o){const l=(0,a.up)("username"),c=(0,a.up)("send"),u=(0,a.up)("list"),i=(0,a.up)("cardcontent");return(0,a.wg)(),(0,a.j4)(i,null,{default:(0,a.w5)((()=>[(0,a._)("div",Te,[(0,a._)("div",Ze,[(0,a.Wm)(l,{users:t.user,onFollow:t.follow,onUnfollow:t.unfollow},null,8,["users","onFollow","onUnfollow"]),t.is_self?((0,a.wg)(),(0,a.j4)(c,{key:0,onSend:t.send},null,8,["onSend"])):(0,a.kq)("",!0)]),(0,a._)("div",Ee,[(0,a.Wm)(u,{user:t.user,list:t.list,onDelete:t.delete_listcontent},null,8,["user","list","onDelete"])])])])),_:1})}const Ve={class:"card"},qe={class:"card-body"},We={class:"row"},Be={class:"col-3"},Ae=["src"],Fe={class:"col-9 text-start"},Re={class:"fsize"};function Me(e,s,n,t,r,l){return(0,a.wg)(),(0,a.iD)("div",Ve,[(0,a._)("div",qe,[(0,a._)("div",We,[(0,a._)("div",Be,[(0,a._)("img",{src:n.users.photo,class:"img-fluid"},null,8,Ae)]),(0,a._)("div",Fe,[(0,a._)("h2",null,(0,o.zw)(n.users.username),1),(0,a._)("div",Re,"粉丝："+(0,o.zw)(n.users.fans),1),n.users.see?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:s[0]||(s[0]=e=>t.follow(n.users.id)),class:"btn btn-info btn-sm mt-2"},"+关注")),n.users.see?((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:s[1]||(s[1]=e=>t.unfollow(n.users.id)),class:"btn btn-info btn-sm mt-2"},"取消关注")):(0,a.kq)("",!0)])])])])}var $e={emits:["follow","unfollow"],name:"UserName",props:{users:{type:Object,required:!1}},setup(e,s){let n=(0,a.Fl)((()=>e.users.head+""+e.users.name));const t=e=>{s.emit("follow",e)},r=e=>{s.emit("unfollow",e)};return{result:n,follow:t,unfollow:r}}};const Le=(0,U.Z)($e,[["render",Me],["__scopeId","data-v-2c87d5c6"]]);var Ne=Le;const Ye={class:"card mb-2"},Ge={class:"card-body text-start"},Ke=["onClick"];function Je(e,s,n,t,r,l){return(0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.list.arr,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a._)("div",Ye,[(0,a._)("div",Ge,[(0,a.Uk)((0,o.zw)(e.content)+" ",1),t.is_me?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",class:"btn btn-danger btn-sm",onClick:s=>t.deletebyid(e.id)},"删除",8,Ke)):(0,a.kq)("",!0)])])])))),128)}var Qe={emits:["delete"],name:"ListContent",props:{list:{type:Object,required:!1},user:{type:Object,required:!0}},setup(e,s){const n=(0,S.oR)(),t=(0,a.Fl)((()=>e.user.id==n.state.user.id)),r=e=>{s.emit("delete",e)};return{is_me:t,deletebyid:r}}};const Xe=(0,U.Z)(Qe,[["render",Je],["__scopeId","data-v-d6486b76"]]);var es=Xe;const ss=(0,a._)("label",{for:"comment"},"动态发布",-1);function ns(e,s,n,r,o,l){return(0,a.wg)(),(0,a.iD)(a.HY,null,[ss,(0,a.wy)((0,a._)("textarea",{"onUpdate:modelValue":s[0]||(s[0]=e=>r.text=e),class:"form-control",rows:"5",id:"comment",name:"text"},null,512),[[t.nr,r.text]]),(0,a._)("button",{class:"btn btn-sm btn-primary mt-2",onClick:s[1]||(s[1]=(...e)=>r.send&&r.send(...e))},"发布")],64)}var ts={emits:["send"],name:"ListSend",setup(e,s){const n=(0,S.oR)();let t=(0,te.iH)("");const a=()=>{""!==t.value&&ne().ajax({type:"POST",url:"https://app165.acapp.acwing.com.cn/myspace/post/",data:{content:t.value},headers:{Authorization:"Bearer "+n.state.user.access},success:function(e){"success"==e.result&&(s.emit("send",t.value),t.value="")}})};return{send:a,text:t}}};const as=(0,U.Z)(ts,[["render",ns]]);var rs=as,os={name:"UserView",components:{cardcontent:R,username:Ne,list:es,send:rs},setup(){const e=(0,S.oR)(),s=(0,T.yj)(),n=s.params.userid,t=(0,te.qj)({id:1,username:"未登录",head:"赵",name:"普",fans:0,see:!1,photo:""}),r=(0,a.Fl)((()=>n==e.state.user.id)),o=(0,te.qj)({num:2,arr:[{id:1,content:"今天又是快乐的一天呢。"},{id:2,content:"今天又是悲伤的一天呢。"}]});ne().ajax({type:"GET",url:"https://app165.acapp.acwing.com.cn/myspace/getinfo/",data:{user_id:n},headers:{Authorization:"Bearer "+e.state.user.access},success:function(e){t.id=e.id,t.username=e.username,t.fans=e.followerCount,t.see=e.is_followed,t.photo=e.photo},error(){console.log("错误")}}),ne().ajax({type:"GET",url:"https://app165.acapp.acwing.com.cn/myspace/post/",data:{user_id:n},headers:{Authorization:"Bearer "+e.state.user.access},success:function(e){o.num=e.length,o.arr=e}});const l=s=>{ne().ajax({type:"DELETE",url:"https://app165.acapp.acwing.com.cn/myspace/post/",data:{post_id:s},headers:{Authorization:"Bearer "+e.state.user.access},success:function(e){"success"==e.result&&(o.arr=o.arr.filter((e=>e.id!=s)),console.log(o.arr),o.num=o.arr.length)}})},c=e=>{console.log(o.arr),o.num++,o.arr.unshift({id:o.num,content:e})},u=e=>{t.fans++,t.see=!0,d(e)},i=e=>{t.fans--,t.see=!1,d(e)},d=s=>{ne().ajax({type:"POST",url:"https://app165.acapp.acwing.com.cn/myspace/follow/",data:{target_id:s},headers:{Authorization:"Bearer "+e.state.user.access},success:function(e){console.log(e.result)}})};return{user:t,follow:u,unfollow:i,list:o,send:c,is_self:r,delete_listcontent:l}}};const ls=(0,U.Z)(os,[["render",Ie]]);var cs=ls;const us=(0,a.Uk)(" 404 ");function is(e,s,n,t,r,o){const l=(0,a.up)("cardcontent");return(0,a.wg)(),(0,a.j4)(l,null,{default:(0,a.w5)((()=>[us])),_:1})}var ds={name:"ErrorView",components:{cardcontent:R}};const ps=(0,U.Z)(ds,[["render",is]]);var ms=ps;const fs=[{path:"/",name:"home",component:L},{path:"/friends/",name:"friends",component:oe},{path:"/have/",name:"have",component:ye},{path:"/login/",name:"login",component:He},{path:"/user/:userid/",name:"user",component:cs},{path:"/error/",name:"error",component:ms},{path:"/:catchAll(.*)",redirect:"/error/"}],ws=(0,T.p7)({history:(0,T.PO)(),routes:fs});var vs=ws,_s=n(1598);const gs={state:{id:-1,username:"",photo:"",followerCount:0,access:"",refresh:"",is_login:!1},getters:{},mutations:{updateUser(e,s){e.id=s.id,e.username=s.username,e.photo=s.photo,e.followerCount=s.followerCount,e.access=s.access,e.refresh=s.refresh,e.is_login=s.is_login},back(e){e.id="",e.username="",e.photo="",e.followerCount=0,e.access="",e.refresh="",e.is_login=!1}},actions:{login(e,s){ne().ajax({type:"POST",url:"https://app165.acapp.acwing.com.cn/api/token/",data:{username:s.username,password:s.password},success(n){const{access:t,refresh:a}=n,r=(0,_s.Z)(t);ne().ajax({type:"GET",url:"https://app165.acapp.acwing.com.cn/myspace/getinfo/",data:{user_id:r.user_id},headers:{Authorization:"Bearer "+t},success(n){e.commit("updateUser",{...n,access:t,refresh:a,is_login:!0}),s.success()},error(){s.error()}})}})}},modules:{}};var bs=gs,hs=(0,S.MT)({state:{},getters:{},mutations:{},actions:{},modules:{user:bs}});(0,t.ri)(H).use(hs).use(vs).use(vs).mount("#app");const ys=localStorage.getItem("username"),ks=localStorage.getItem("password");console.log(ys),null!=ys&&null!=ks&&hs.dispatch("login",{password:ks,username:ys,success(){console.log("ok")},error(){console.log("error")}})}},s={};function n(t){var a=s[t];if(void 0!==a)return a.exports;var r=s[t]={exports:{}};return e[t].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(s,t,a,r){if(!t){var o=1/0;for(i=0;i<e.length;i++){t=e[i][0],a=e[i][1],r=e[i][2];for(var l=!0,c=0;c<t.length;c++)(!1&r||o>=r)&&Object.keys(n.O).every((function(e){return n.O[e](t[c])}))?t.splice(c--,1):(l=!1,r<o&&(o=r));if(l){e.splice(i--,1);var u=a();void 0!==u&&(s=u)}}return s}r=r||0;for(var i=e.length;i>0&&e[i-1][2]>r;i--)e[i]=e[i-1];e[i]=[t,a,r]}}(),function(){n.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(s,{a:s}),s}}(),function(){n.d=function(e,s){for(var t in s)n.o(s,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(s){return 0===e[s]};var s=function(s,t){var a,r,o=t[0],l=t[1],c=t[2],u=0;if(o.some((function(s){return 0!==e[s]}))){for(a in l)n.o(l,a)&&(n.m[a]=l[a]);if(c)var i=c(n)}for(s&&s(t);u<o.length;u++)r=o[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(i)},t=self["webpackChunkvue2"]=self["webpackChunkvue2"]||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))}();var t=n.O(void 0,[998],(function(){return n(4902)}));t=n.O(t)})();
//# sourceMappingURL=app.21950481.js.map